DC IP plan

p2p – /30, /31 или unnumbered
Lo – /32 
Сервисы – VLSM

Например:

IP = 10.Dn.Sn.X/31, где:
Dn – диапазон в зависимости от номера ЦОДа,
Sn – номер spine,
X – значение по порядку,

Dn для DC1 = [0 .. 7],
Dn для DC2 = [8 .. 15],
…
Dn для DCN = [8*(N-1) .. (8*N-1)], где

DC1

0 – Lo1 (/16) (8*(N-1))
10.0.0.0/16
1 – Lo2 (/16) (8*(N-1) + 1)
10.1.0.0/16

Суммарный для Lo1 и Lo2 – 10.0.0.0/15

2 – p2p links (/16)  (8*(N-1) + 2)
10.2.0.0/16
3 – резерв (/16) (8*(N-1) + 3)
10.3.0.0/16

Суммарный для p2p и резерва – 10.2.0.0/15

[4 .. 7] – services (/16) (8*(N-1) + [4 .. 7])
10.4.0.0/16
10.5.0.0/16
10.6.0.0/16
10.7.0.0/16

Суммарный – 10.4.0.0/14

DC1 – 10.0.0.0/13
DC2 – 10.8.0.0/13
…
DCN – 10.8*(N-1).0.0/13
N = [1 .. 32]


DC1

10.0.1.0/32 – Spine 1 Lo1
10.0.N.0/32 – Spine N Lo1

10.1.0.3/32 – Leaf 3 Lo2
10.1.0.N/32 – Leaf N Lo2

10.2.2.4/31 – p2p Spine 2   Leaf 3
10.2.N.2*(M-1)/31 – p2p Spine N   Leaf M
M= [1 .. 128]

10.4.0.0/14 – services summary


Рекомендация для больших сетей – выделяйте адреса подряд, учитывая только суммаризацию (2^N)

Правильно!
10.0.0.0/16
10.1.0.0/16

10.0.0.0/15

Неправильно!
10.1.0.0/16
10.2.0.0/16

10.0.0.0/14


DC2

8 – Lo1 (/16)
10.8.0.0/16
9 – Lo2 (/16)
10.9.0.0/16

Суммарный для Lo1 и Lo2 – 10.8.0.0/15

10 – p2p links (/16) 
10.10.0.0/16
11 – резерв (/16)
10.11.0.0/16

Суммарный для p2p и резерва – 10.10.0.0/15

[12 .. 15] – services (/16)
10.12.0.0/16
10.13.0.0/16
10.14.0.0/16
10.15.0.0/16

Суммарный – 10.12.0.0/14


10.8.1.0/32 – Spine 1 Lo1
10.8.N.0/32 – Spine N Lo1

10.9.0.3/32 – Leaf 3 Lo2
10.9.0.N/32 – Leaf N Lo2

10.10.2.4/31 – p2p Spine 2   Leaf 3
10.10.N.2*(M-1)/31 – p2p Spine N   Leaf M
M= [1 .. 128]

10.12.0.0/14 – services summary

